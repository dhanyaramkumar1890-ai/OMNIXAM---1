<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OMNIXAM - Your Complete Exam Information Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #667eea;
        }

        .auth-buttons button {
            padding: 10px 25px;
            margin-left: 10px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .login-btn {
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea !important;
        }

        .signup-btn {
            background: #667eea;
            color: white;
        }

        .login-btn:hover, .signup-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-email {
            color: #333;
            font-weight: 500;
        }

        .logout-btn {
            background: #ff4757;
            color: white;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 15px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 25px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .submit-btn {
            width: 100%;
            padding: 14px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            transition: background 0.3s;
        }

        .submit-btn:hover {
            background: #5568d3;
        }

        .close-modal {
            float: right;
            font-size: 28px;
            cursor: pointer;
            color: #999;
        }

        .close-modal:hover {
            color: #333;
        }

        .switch-auth {
            text-align: center;
            margin-top: 20px;
            color: #666;
        }

        .switch-auth a {
            color: #667eea;
            cursor: pointer;
            text-decoration: none;
            font-weight: 600;
        }

        .main-content {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .sidebar {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            height: fit-content;
        }

        .sidebar h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 18px;
        }

        .state-filter {
            list-style: none;
        }

        .state-filter li {
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            color: #555;
        }

        .state-filter li:hover {
            background: #f0f0f0;
        }

        .state-filter li.active {
            background: #667eea;
            color: white;
        }

        .content-area {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .search-bar {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 30px;
        }

        .search-bar:focus {
            outline: none;
            border-color: #667eea;
        }

        .exam-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .exam-card {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .exam-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border-color: #667eea;
        }

        .exam-card h3 {
            color: #667eea;
            margin-bottom: 12px;
            font-size: 20px;
        }

        .exam-card .category {
            display: inline-block;
            padding: 5px 12px;
            background: #f0f0f0;
            border-radius: 15px;
            font-size: 12px;
            margin-bottom: 10px;
            color: #666;
        }

        .exam-card p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .exam-card .details {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
            font-size: 14px;
            color: #888;
        }

        .exam-detail-modal .modal-content {
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .exam-detail-content h2 {
            color: #667eea;
            margin-bottom: 20px;
        }

        .exam-detail-content h3 {
            color: #333;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .exam-detail-content ul {
            list-style-position: inside;
            color: #666;
            line-height: 2;
        }

        .exam-detail-content .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .info-item {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .info-item strong {
            color: #667eea;
            display: block;
            margin-bottom: 5px;
        }

        .download-btn {
            display: inline-block;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border-radius: 8px;
            text-decoration: none;
            margin-right: 10px;
            margin-top: 10px;
            transition: background 0.3s;
        }

        .download-btn:hover {
            background: #5568d3;
        }

        .error-message {
            color: #ff4757;
            font-size: 14px;
            margin-top: 10px;
            text-align: center;
        }

        .success-message {
            color: #2ecc71;
            font-size: 14px;
            margin-top: 10px;
            text-align: center;
        }

        .loading {
            text-align: center;
            padding: 50px;
            color: #667eea;
            font-size: 18px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .exam-grid {
                grid-template-columns: 1fr;
            }

            .header {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üéì OMNIXAM</div>
            <div id="authSection">
                <div class="auth-buttons" id="guestButtons">
                    <button class="login-btn" onclick="openLoginModal()">Login</button>
                    <button class="signup-btn" onclick="openSignupModal()">Sign Up</button>
                </div>
                <div class="user-info" id="userSection" style="display: none;">
                    <span class="user-email" id="userEmail"></span>
                    <button class="logout-btn auth-buttons" onclick="logout()">Logout</button>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <h3>Select State</h3>
                <ul class="state-filter">
                    <li class="active" onclick="filterByState('all')">All States</li>
                    <li onclick="filterByState('Tamil Nadu')">Tamil Nadu</li>
                    <li onclick="filterByState('Kerala')">Kerala</li>
                    <li onclick="filterByState('Karnataka')">Karnataka</li>
                </ul>
            </div>

            <div class="content-area">
                <input type="text" class="search-bar" id="searchBar" placeholder="Search for exams, colleges, or coaching centers..." oninput="searchExams()">
                <div id="examsList">
                    <div class="loading">Loading exams...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeLoginModal()">&times;</span>
            <div class="modal-header">Welcome Back!</div>
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="submit-btn">Login</button>
                <div id="loginError" class="error-message"></div>
            </form>
            <div class="switch-auth">
                Don't have an account? <a onclick="switchToSignup()">Sign up</a>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal" id="signupModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeSignupModal()">&times;</span>
            <div class="modal-header">Create Account</div>
            <form onsubmit="handleSignup(event)">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="signupName" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="signupEmail" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="signupPassword" required minlength="6">
                </div>
                <button type="submit" class="submit-btn">Sign Up</button>
                <div id="signupError" class="error-message"></div>
            </form>
            <div class="switch-auth">
                Already have an account? <a onclick="switchToLogin()">Login</a>
            </div>
        </div>
    </div>

    <!-- Exam Detail Modal -->
    <div class="modal exam-detail-modal" id="examDetailModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeExamDetail()">&times;</span>
            <div id="examDetailContent" class="exam-detail-content"></div>
        </div>
    </div>
   <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, collection, addDoc, getDocs, doc, setDoc, query, where } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAwOEeOVG29O8DJRzmEOKxmRXoR8R2b5cU",
  authDomain: "omnixam---dl.firebaseapp.com",
  projectId: "omnixam---dl",
  storageBucket: "omnixam---dl.firebasestorage.app",
  messagingSenderId: "218730322717",
  appId: "1:218730322717:web:f7e90b2c1a232538435ff4"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

window.auth = auth;
window.db = db;
window.addDoc = addDoc;
window.collection = collection;
window.getDocs = getDocs;
window.setDoc = setDoc;
window.doc = doc;
window.signOut = signOut;
        // Sample exam data
        const examsData = [
            // Tamil Nadu Exams
            {
                id: 1,
                name: "TNPSC Group 1",
                state: "Tamil Nadu",
                category: "State Civil Services",
                description: "Tamil Nadu Public Service Commission Group 1 exam for Deputy Collector, DSP and other posts.",
                eligibility: "Graduate degree from recognized university",
                ageLimit: "21-32 years",
                examPattern: "Prelims + Mains + Interview",
                syllabus: ["General Studies", "Tamil", "General English", "Aptitude"],
                importantDates: {
                    notification: "June 2024",
                    examDate: "October 2024",
                    applicationDeadline: "July 2024"
                },
                colleges: ["Anna University", "Madras University", "Bharathiar University"],
                coachingCenters: ["Race Institute Chennai", "Shankar IAS Academy", "Vedhik IAS Academy"]
            },
            {
                id: 2,
                name: "TNEA (Engineering Admissions)",
                state: "Tamil Nadu",
                category: "Engineering Entrance",
                description: "Tamil Nadu Engineering Admissions for B.E/B.Tech programs",
                eligibility: "12th pass with Physics, Chemistry, Mathematics",
                ageLimit: "17 years minimum",
                examPattern: "Based on 12th marks, no separate entrance",
                syllabus: ["Physics", "Chemistry", "Mathematics"],
                importantDates: {
                    notification: "May 2024",
                    counselling: "July 2024",
                    applicationDeadline: "June 2024"
                },
                colleges: ["IIT Madras", "Anna University", "PSG College of Technology", "Coimbatore Institute of Technology"],
                coachingCenters: ["Sri Chaitanya", "Narayana", "FIITJEE Chennai"]
            },
            {
                id: 3,
                name: "TANCET",
                state: "Tamil Nadu",
                category: "Postgraduate Entrance",
                description: "Tamil Nadu Common Entrance Test for MBA, MCA, M.E/M.Tech",
                eligibility: "Bachelor's degree in relevant field",
                ageLimit: "No age limit",
                examPattern: "Computer-based test",
                syllabus: ["Quantitative Ability", "Logical Reasoning", "Verbal Ability"],
                importantDates: {
                    notification: "February 2024",
                    examDate: "March 2024",
                    applicationDeadline: "February 2024"
                },
                colleges: ["Anna University", "MIT Chennai", "Loyola College"],
                coachingCenters: ["T.I.M.E Chennai", "IMS Chennai", "CL Chennai"]
            },

            // Kerala Exams
            {
                id: 4,
                name: "Kerala PSC",
                state: "Kerala",
                category: "State Civil Services",
                description: "Kerala Public Service Commission exams for various government jobs",
                eligibility: "Varies by post - SSLC to Degree",
                ageLimit: "18-36 years (varies by post)",
                examPattern: "Written Test + Interview",
                syllabus: ["General Knowledge", "Current Affairs", "Kerala History", "Mathematics"],
                importantDates: {
                    notification: "Ongoing",
                    examDate: "Various dates",
                    applicationDeadline: "As per notification"
                },
                colleges: ["Kerala University", "MG University", "Calicut University"],
                coachingCenters: ["Winners Institute", "Sura's Academy", "Brain Menders"]
            },
            {
                id: 5,
                name: "KEAM",
                state: "Kerala",
                category: "Engineering/Medical Entrance",
                description: "Kerala Engineering Architecture Medical entrance examination",
                eligibility: "12th pass with relevant subjects",
                ageLimit: "17 years minimum",
                examPattern: "Paper 1 (Physics & Chemistry), Paper 2 (Mathematics)",
                syllabus: ["Physics", "Chemistry", "Mathematics", "Biology"],
                importantDates: {
                    notification: "March 2024",
                    examDate: "May 2024",
                    applicationDeadline: "April 2024"
                },
                colleges: ["NIT Calicut", "CET Trivandrum", "GEC Thrissur", "Model Engineering College"],
                coachingCenters: ["Brilliant Tutorials", "Salient Features", "Exam Race"]
            },
            {
                id: 6,
                name: "Kerala SET",
                state: "Kerala",
                category: "Eligibility Test",
                description: "State Eligibility Test for Assistant Professor posts",
                eligibility: "Master's degree with 55% marks",
                ageLimit: "No upper age limit",
                examPattern: "Two papers - objective type",
                syllabus: ["Subject specific", "Teaching Aptitude", "Research Methodology"],
                importantDates: {
                    notification: "November 2024",
                    examDate: "January 2025",
                    applicationDeadline: "December 2024"
                },
                colleges: ["Kerala University", "Kannur University", "MG University"],
                coachingCenters: ["KAS Online Academy", "Brilliant Academy", "Success Academy"]
            },

            // Karnataka Exams
            {
                id: 7,
                name: "KPSC KAS",
                state: "Karnataka",
                category: "State Civil Services",
                description: "Karnataka Public Service Commission - Karnataka Administrative Service",
                eligibility: "Bachelor's degree from recognized university",
                ageLimit: "21-35 years",
                examPattern: "Prelims + Mains + Interview",
                syllabus: ["General Studies", "Kannada Language", "General English", "Current Affairs"],
                importantDates: {
                    notification: "May 2024",
                    examDate: "September 2024",
                    applicationDeadline: "June 2024"
                },
                colleges: ["Bangalore University", "Mysore University", "Karnataka University"],
                coachingCenters: ["Achievers IAS Academy", "Lakshya IAS Academy", "Samkalpa IAS Academy"]
            },
            {
                id: 8,
                name: "KCET",
                state: "Karnataka",
                category: "Engineering/Medical Entrance",
                description: "Karnataka Common Entrance Test for Engineering and Medical admissions",
                eligibility: "12th pass with PCM/PCB",
                ageLimit: "17 years minimum",
                examPattern: "Physics, Chemistry, Mathematics/Biology",
                syllabus: ["Physics", "Chemistry", "Mathematics", "Biology"],
                importantDates: {
                    notification: "March 2024",
                    examDate: "April 2024",
                    applicationDeadline: "March 2024"
                },
                colleges: ["RVCE Bangalore", "BMS College", "PESIT", "MS Ramaiah", "Manipal Institute"],
                coachingCenters: ["Deeksha", "BASE Educational Services", "Sri Chaitanya Bangalore"]
            },
            {
                id: 9,
                name: "Karnataka PGCET",
                state: "Karnataka",
                category: "Postgraduate Entrance",
                description: "Post Graduate Common Entrance Test for MBA, MCA, M.Tech",
                eligibility: "Bachelor's degree in relevant stream",
                ageLimit: "No age limit",
                examPattern: "Computer-based test",
                syllabus: ["Quantitative Aptitude", "Reasoning", "Verbal Ability", "Subject specific"],
                importantDates: {
                    notification: "June 2024",
                    examDate: "July 2024",
                    applicationDeadline: "June 2024"
                },
                colleges: ["IIM Bangalore", "NITK Surathkal", "Bangalore University", "Christ University"],
                coachingCenters: ["T.I.M.E Bangalore", "IMS Bangalore", "CL Bangalore"]
            },
            {
                id: 10,
                name: "Karnataka Bank PO",
                state: "Karnataka",
                category: "Banking",
                description: "Karnataka Bank Probationary Officer recruitment exam",
                eligibility: "Graduate degree with 60% marks",
                ageLimit: "21-30 years",
                examPattern: "Prelims + Mains + Interview",
                syllabus: ["Reasoning", "Quantitative Aptitude", "English", "Banking Awareness"],
                importantDates: {
                    notification: "As announced",
                    examDate: "Variable",
                    applicationDeadline: "As per notification"
                },
                colleges: ["Bangalore University", "Christ University", "St. Joseph's College"],
                coachingCenters: ["Oliveboard", "Gradeup", "Bankersadda Coaching"]
            }
        ];

        let currentState = 'all';
        let currentUser = null;

        // Initialize data in Firestore (run once)
        async function initializeExamsData() {
            try {
                const examsRef = collection(db, 'exams');
                const snapshot = await getDocs(examsRef);
                
                if (snapshot.empty) {
                    for (const exam of examsData) {
                        await addDoc(collection(db, 'exams'), exam);
                    }
                    console.log('Exams data initialized in Firestore');
                }
            } catch (error) {
                console.error('Error initializing data:', error);
            }
        }

        // Load and display exams
        async function loadExams() {
            try {
                const examsRef = collection(db, 'exams');
                const snapshot = await getDocs(examsRef);
                
                if (snapshot.empty) {
                    // If no data in Firestore, use local data and initialize
                    displayExams(examsData);
                    await initializeExamsData();
                } else {
                    const exams = [];
                    snapshot.forEach((doc) => {
                        exams.push({ ...doc.data(), firestoreId: doc.id });
                    });
                    displayExams(exams);
                }
            } catch (error) {
                console.error('Error loading exams:', error);
                displayExams(examsData);
            }
        }

        function displayExams(exams) {
            const examsList = document.getElementById('examsList');
            let filteredExams = exams;

            if (currentState !== 'all') {
                filteredExams = exams.filter(exam => exam.state === currentState);
            }

            if (filteredExams.length === 0) {
                examsList.innerHTML = '<p style="text-align: center; color: #999; padding: 50px;">No exams found</p>';
                return;
            }

            examsList.innerHTML = '<div class="exam-grid">' + filteredExams.map(exam => `
                <div class="exam-card" onclick="showExamDetail(${exam.id || exam.firestoreId})">
                    <span class="category">${exam.category}</span>
                    <h3>${exam.name}</h3>
                    <p>${exam.description}</p>
                    <div class="details">
                        <span>üìç ${exam.state}</span>
                        <span>üë• ${exam.ageLimit}</span>
                    </div>
                </div>
            `).join('') + '</div>';
        }

        window.showExamDetail = function(examId) {
            if (!currentUser) {
                alert('Please login to view exam details');
                openLoginModal();
                return;
            }

            const exam = examsData.find(e => e.id === examId);
            if (!exam) return;

            const detailContent = `
                <h2>${exam.name}</h2>
                <p style="color: #666; margin-bottom: 20px;">${exam.description}</p>
                
                <div class="info-grid">
                    <div class="info-item">
                        <strong>State</strong>
                        <span>${exam.state}</span>
                    </div>
                    <div class="info-item">
                        <strong>Category</strong>
                        <span>${exam.category}</span>
                    </div>
                    <div class="info-item">
                        <strong>Eligibility</strong>
                        <span>${exam.eligibility}</span>
                    </div>
                    <div class="info-item">
                        <strong>Age Limit</strong>
                        <span>${exam.ageLimit}</span>
                    </div>
                </div>

                <h3>Exam Pattern</h3>
                <p>${exam.examPattern}</p>

                <h3>Syllabus</h3>
                <ul>
                    ${exam.syllabus.map(topic => `<li>${topic}</li>`).join('')}
                </ul>

                <h3>Important Dates</h3>
                <div class="info-grid">
                    <div class="info-item">
                        <strong>Notification</strong>
                        <span>${exam.importantDates.notification}</span>
                    </div>
                    <div class="info-item">
                        <strong>Exam Date</strong>
                        <span>${exam.importantDates.examDate}</span>
                    </div>
                    <div class="info-item">
                        <strong>Application Deadline</strong>
                        <span>${exam.importantDates.applicationDeadline}</span>
                    </div>
                </div>

                <h3>Top Colleges/Universities</h3>
                <ul>
                    ${exam.colleges.map(college => `<li>${college}</li>`).join('')}
                </ul>

                <h3>Recommended Coaching Centers</h3>
                <ul>
                    ${exam.coachingCenters.map(center => `<li>${center}</li>`).join('')}
                </ul>

                <h3>Study Materials</h3>
                <a href="#" class="download-btn" onclick="alert('Study material download will be implemented')">üìö Download Study Material</a>
                <a href="#" class="download-btn" onclick="alert('Previous papers download will be implemented')">üìÑ Previous Year Papers</a>
            `;

            document.getElementById('examDetailContent').innerHTML = detailContent;
            document.getElementById('examDetailModal').classList.add('active');
        };

        window.closeExamDetail = function() {
            document.getElementById('examDetailModal').classList.remove('active');
        };

        window.filterByState = function(state) {
            currentState = state;
            
            // Update active state in sidebar
            document.querySelectorAll('.state-filter li').forEach(li => {
                li.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadExams();
        };

        window.searchExams = function() {
            const searchTerm = document.getElementById('searchBar').value.toLowerCase();
            const filtered = examsData.filter(exam => 
                exam.name.toLowerCase().includes(searchTerm) ||
                exam.description.toLowerCase().includes(searchTerm) ||
                exam.category.toLowerCase().includes(searchTerm) ||
                exam.colleges.some(college => college.toLowerCase().includes(searchTerm)) ||
                exam.coachingCenters.some(center => center.toLowerCase().includes(searchTerm))
            );
            
            if (currentState !== 'all') {
                const stateFiltered = filtered.filter(exam => exam.state === currentState);
                displayExams(stateFiltered);
            } else {
                displayExams(filtered);
            }
        };

        // Authentication functions
        window.openLoginModal = function() {
            document.getElementById('loginModal').classList.add('active');
        };

        window.closeLoginModal = function() {
            document.getElementById('loginModal').classList.remove('active');
        };

        window.openSignupModal = function() {
            document.getElementById('signupModal').classList.add('active');
        };

        window.closeSignupModal = function() {
            document.getElementById('signupModal').classList.remove('active');
        };

        window.switchToSignup = function() {
            closeLoginModal();
            openSignupModal();
        };

        window.switchToLogin = function() {
            closeSignupModal();
            openLoginModal();
        };

        window.handleLogin = async function(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');

            try {
                await signInWithEmailAndPassword(auth, email, password);
                errorDiv.textContent = '';
                closeLoginModal();
            } catch (error) {
                errorDiv.textContent = error.message;
            }
        };

        window.handleSignup = async function(event) {
            event.preventDefault();
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const errorDiv = document.getElementById('signupError');

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                
                // Save user data to Firestore
                await setDoc(doc(db, 'users', userCredential.user.uid), {
                    name: name,
                    email: email,
                    createdAt: new Date().toISOString()
                });

                errorDiv.textContent = '';
                closeSignupModal();
            } catch (error) {
                errorDiv.textContent = error.message;
            }
        };

        window.logout = async function() {
            try {
                await signOut(auth);
            } catch (error) {
                console.error('Logout error:', error);
            }
        };

        // Auth state observer
        onAuthStateChanged(auth, (user) => {
            currentUser = user;
            if (user) {
                document.getElementById('guestButtons').style.display = 'none';
                document.getElementById('userSection').style.display = 'flex';
                document.getElementById('userEmail').textContent = user.email;
            } else {
                document.getElementById('guestButtons').style.display = 'block';
                document.getElementById('userSection').style.display = 'none';
            }
        });

        // Initialize app
        loadExams();
       const firebaseConfig = {
    apiKey: "AIzaSyAwOEeOVG29O8DJRzmEOKxmRXoR8R2b5cU",
    authDomain: "omnixam---dl.firebaseapp.com",
    projectId: "omnixam---dl",
    storageBucket: "omnixam---dl.firebasestorage.app",
    messagingSenderId: "218730322717",
    appId: "1:218730322717:web:f7e90b2c1a232538435ff4",
    measurementId: "G-9X4XCBZKV6"
  };
    </script>
   

</body>
</html>
